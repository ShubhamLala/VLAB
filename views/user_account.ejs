<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/user_account_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <title>Vlab</title>
</head>
<body>
    <nav class="heading navbar navbar-expand-sm navbar-light">
        <img class= "nav-brand" src="/images/VIT.png" height=80vw widht=80vw>
        <h1 class="navbar-brand justify-content-center">V-LAB</h1>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse flex-grow-0" id="navbarSupportedContent">
        <ul class="navbar-nav text-right">
          <li class="nav-item dropdown">
            <a class="nav-link nav-item dropdown-toggle logged" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Profile
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="#">My Account</a>
              <a class="dropdown-item" href="/report">Report</a>
              <a class="dropdown-item" href="/logout">Logout</a>
            </div>
          </li>
      </div>
    </nav>
    
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="/home">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="/leaderboard">Leaderboard</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Test
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="/test/c">C</a>
              <a class="dropdown-item" href="/test/cpp">C++</a>
              <a class="dropdown-item" href="/test/java">Java</a>
              <a class="dropdown-item" href="/test/python">Python</a>
            </div>
          </li>
          <li class="nav-item"><a class="nav-link" href="#">About Us</a></li class="nav-item">
          <li class="nav-item"><a class="nav-link" href="#">Contact</a></li>
        </ul>
      </div>
      </nav>
      <div class="con">
          <div class="sidebar">
              <% if(view =="profile"){%>
                <a class="active" style="color:#fff" href="/user/account?view=profile">Profile</a>
                <a href="/user/account?view=marks">View Marks</a>
                <a href="/user/account?view=security">Security & Privacy</a>
              <%}%>
              <% if(view =="marks"){%>
                <a href="/user/account?view=profile">Profile</a>
                <a class="active" style="color:#fff" href="/user/account?view=marks">View Marks</a>
                <a href="/user/account?view=security">Security & Privacy</a>
              <%}%>
              <% if(view =="security"){%>
                <a href="/user/account?view=profile">Profile</a>
                <a href="/user/account?view=marks">View Marks</a>
                <a class="active" style="color:#fff" href="/user/account?view=security">Security & Privacy</a>
              <%}%>
            </div>
            <div class="main">
              <br>
            <% if(view=="profile"){%>
                <pre>Username:                                <%=details.username%></pre>
                <pre>First Name (Appears on Certificate):     <%=details.firstname%>  <i onclick="showFname()" class="fa fa-edit"></i></pre>
                <form action="/user/account/changeFname" method="post" style="display:none;" id="fform">
                  <input type="text" placeholder="New First Name" name="fname"><br><br>
                  <input class="button" type="submit" id="fsubmit"><br><br>
              </form>
                <%if(details.lastname.length != 0){%>
                    <pre>Last Name (Appears on Certificate):      <%=details.lastname%>  <i onclick="showLname()" class="fa fa-edit"></i></pre>
                    <form action="/user/account/changeLname" method="post" style="display: none;" id="lform">
                      <input type="text" placeholder="New Last Name" name="lname"><br><br>
                      <input class="button" type="submit" id="lsubmit"><br><br>
                  </form>
                <%}%>
                <pre>Total Tests Taken:                        <%=details.numOfTestsTaken%></pre>
                <pre>Highest Marks Obtained:                   <%=details.maxMarks %></pre>
                <pre>Average Marks:                            <%= details.averageMarks %></pre>
            <%} %>
            <% if(view==="marks"){%>
                <table border="1px" class="table">
                    <th>Category</th>
                    <th>Marks</th>
                    <th>Date and Time</th>
                    <th>Certificate</th>
                <%for(var i = 0;i < details.length;i++){%>
                        <tr>
                            <td><%=details[i].cat%></td>
                            <td><%=details[i].m_ob%></td>
                            <td><%=details[i].d_t%></td>
                            <td><form action="/user/account/getcertificate" method="POST"><button name="index" type="submit" value="<%=i%>"><span>Get certificate</span></button></td></form>
                            </tr>

                <%}%>
            <%}%>


            <% if(view==="security"){%>
                <form action="/user/account/resetpassword" method="post">
                    <br>
                    <input type="password" placeholder="Current Password" name="current">
                    <br><br>
                    <input type="password" placeholder="New Password" name="new"><br><br>
                    <input type="password" placeholder="Confirm New Password" name="confirm"><br><br>
                    <button class="button"><span>Submit</span></button>
                </form>
                <form action="/user/account/emailsubscription" method="post">
                    Currently you are <%=details.subscription%> to Email notification <br>
                    <select name="email">
                        <%if(details.subscription==="subscribed"){%>
                            <option value="enable" selected>Enabled</option>
                            <option value="disable">Disabled</option>
                        <%}%>
                        <%if(details.subscription==="not subscribed"){%>
                            <option value="enable">Enabled</option>
                            <option value="disable" selected>Disabled</option>
                        <%}%>
                    </select><br>
                    <button class="button"><span>Submit</span></button>
                </form>
            <%}%>
        </div>
    </div>
    <script>
      function showFname(){
          var fform = document.getElementById("fform");
          fform.style.display = "block";
      }
      function showLname(){
          var lform = document.getElementById("lform");
          lform.style.display = "block";
      }
  </script>
</body>
</html>